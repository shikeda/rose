%
%    訓点資料用スタイル・ファイル  kunten2e.sty
%
%    Ver 1.0
%
%    作成者：金水　敏  kinsui@let.osaka-u.ac.jp
%
%    アスキー版縦書き pLaTeX2e と一緒にお使い下さい．
%
\newlength{\moziretuhaba}
\newlength{\moziretuhabaii}
\newlength{\moziretuhabaiii}
\newlength{\moziretuhabaiv}

\newlength{\rubysep}
\newlength{\sougyousep}
%\newlength{\sangyousep}
%
%  \rubysep  ルビ類の本行とルビの間の間隔の設定
%
\setlength{\rubysep}{0ex}
%
%  \sougyousep 双行（二行割）の行間の設定
%
\setlength{\sougyousep}{.2ex}

%
% original \ruby 磯崎英樹『LaTeX 自由自在』サイエンス社　p.88
% \ruby{振りがな}{本行}
% 振りがなと本行は，中央揃え．
%
\def\ruby#1#2{\leavevmode\vbox{\baselineskip\z@skip \lineskip\rubysep
\ialign{##\crcr\tiny\hfill#1\hfill\crcr\hfill#2\hfill\crcr}}}
%
%  \rubyii
%  original \ruby の振りがなと本行の項を入れ換える．
%  \rubyii{本行}{振りがな}
%  振りがなと本行は，中央揃え．
%
\def\rubyii#1#2{\leavevmode\vbox{\baselineskip\z@skip \lineskip\rubysep
\ialign{##\crcr\tiny\hfill#2\hfill\crcr\hfill#1\hfill\crcr}}}
%
%  \hidarirubyii
%  \rubyii の左版．　本行の左側に振りがなを付ける．
%  \hidarirubyii{本行}{左振りがな}
%  振りがなと本行は，中央揃え
%
\def\hidarirubyii#1#2{\leavevmode\vtop{\baselineskip\z@skip \lineskip\rubysep
\ialign{##\crcr\hfill#1\hfill\crcr\tiny\hfill#2\hfill\crcr}}}
%
%  \ukun
%  \rubyii の変形．振りがなと本行を頭揃えにする．
%  \ukun{本行}{振りがな}
%
\def\ukun#1#2{\leavevmode\vbox{\baselineskip\z@skip \lineskip\rubysep
\ialign{##\crcr\tiny#2\hfill\crcr#1\hfill\crcr}}}
%
%  \sakun
%  本行の左側に振りがなを付ける．本行と振りがなは頭揃え
%  \sakun{本行}{振りがな}
%
\def\sakun#1#2{\leavevmode\vtop{\baselineskip\z@skip \lineskip\rubysep
\ialign{##\crcr#1\hfill\crcr\tiny#2\hfill\crcr}}}
%
%  \kanjiukun
%  \ukun の変形．振り漢字用に，\ukun よりも文字のポイントを大きくする．
%  本行と振りがなは頭揃え
%  \kanjiukun{本行}{振りがな}
%
\def\kanjiukun#1#2{\leavevmode\vbox{\baselineskip\z@skip \lineskip\rubysep
\ialign{##\crcr\scriptsize#2\hfill\crcr#1\hfill\crcr}}}
%
%  \kanjisakun
%  \sakun の変形．振り漢字用に，\sakun よりも文字のポイントを大きくする．
%  本行と振りがなは頭揃え
%  \kanjisakun{本行}{振りがな}
%
\def\kanjisakun#1#2{\leavevmode\vtop{\baselineskip\z@skip \lineskip\rubysep
\ialign{##\crcr#1\hfill\crcr\scriptsize#2\hfill\crcr}}}
%
%  \kintoruby
%  振りがなが本行より短い場合，振りがなを本行の長さに合わせて均等割にする．
%  振りがなが本行より長い場合は，\ukun と同じ
%  \kintoruby{本行}{振りがな}
%
\def\kintoruby#1#2{\leavevmode\vbox{\baselineskip\z@skip \lineskip\rubysep
\ialign{##\crcr\tiny#2\crcr#1\hfill\crcr}}}
%
%  \hidarikintoruby
%  \kintoruby の左版．
%  振りがなが本行より短い場合，振りがなを本行の長さに合わせて均等割にする．
%  振りがなが本行より長い場合は，\sakun と同じ
%  \hidarikintoruby{本行}{振りがな}
%
\def\hidarikintoruby#1#2{\leavevmode\vtop{\baselineskip\z@skip \lineskip%
\rubysep\ialign{##\crcr#1\crcr\tiny#2\hfill\crcr}}}
%
%  \kanjikintoruby
%  \kintoruby の漢字版．振り漢字用に文字のポイントを大きめにしてある．
%  振りがなが本行より短い場合，振りがなを本行の長さに合わせて均等割にする．
%  振りがなが本行より長い場合は，\kanjiukun と同じ
%  \kanjikintoruby{本行}{振りがな}
%
\def\kanjikintoruby#1#2{\leavevmode\vbox{\baselineskip\z@skip \lineskip\rubysep
\ialign{##\crcr\scriptsize#2\crcr#1\hfill\crcr}}}
%
%  \hidarikanjikintoruby
%  \hidarikintoruby の漢字版．振り漢字用に文字のポイントを大きめにしてある．
%  振りがなが本行より短い場合，振りがなを本行の長さに合わせて均等割にする．
%  振りがなが本行より長い場合は，\kanjisakun と同じ
%  \hidarikanjikintoruby{本行}{振りがな}
%
\def\hidarikanjikintoruby#1#2{\leavevmode\vtop{\baselineskip\z@skip \lineskip%
\rubysep\ialign{##\crcr#1\crcr\scriptsize#2\hfill\crcr}}}
%
%  \sougyou
%  二行割コマンド．行間は \sougyousep に長さを設定して調整できる．
%  \sougyou{右行}{左行}
%
\def\sougyou#1#2{\settowidth{\moziretuhaba}{{\scriptsize #1}}%
		\settowidth{\moziretuhabaii}{{\scriptsize #2}}
		\ifdim\moziretuhaba<\moziretuhabaii 
			\moziretuhaba=\moziretuhabaii \fi
		\unskip%
		\hskip\kanjiskip
		\parbox{\moziretuhaba}{\baselineskip\z@skip \lineskip\sougyousep
					{\scriptsize #1}\\
                         	        {\scriptsize #2}
			}\unskip
		}

\def\kintokanjiskip{\kanjiskip=0pt plus 1fil minus 1fil%
\xkanjiskip=\kanjiskip}
\def\kinto#1#2{\hbox to #1{\kintokanjiskip#2}}
%
%  \hukusougyou
%  副双行．双行中に，さらに双行を作る．
%  \hukusougyou{右行}{左行}
%
\def\hukusougyou#1#2{\settowidth{\moziretuhaba}{{\tiny #1}}
		\settowidth{\moziretuhabaii}{{\tiny #2}}
		\ifdim\moziretuhaba<\moziretuhabaii 
			\moziretuhaba=\moziretuhabaii \fi
		\unskip%
		\parbox{\moziretuhaba}{\raisebox{-.6ex}{\tiny #1}\\
                         	        \raisebox{.6ex}{\tiny #2}
			}
		}
%
%  \sangyouwari
%  三行割りを作る．
%  \sangyouwari{右行}{中央行}{左行}
%
\def\sangyouwari#1#2#3{\settowidth{\moziretuhaba}{{\scriptsize #1}}
		\unskip\settowidth{\moziretuhabaii}{{\scriptsize #2}}
		\unskip\settowidth{\moziretuhabaiii}{{\scriptsize #3}}
		\unskip\ifdim\moziretuhaba<\moziretuhabaii 
			\moziretuhaba=\moziretuhabaii \fi
		\unskip\ifdim\moziretuhaba<\moziretuhabaiii 
			\moziretuhaba=\moziretuhabaiii \fi
		\hskip\kanjiskip
		\parbox{\moziretuhaba}{\raisebox{-.8zh}{\scriptsize #1}\\
                         	        \mbox{\scriptsize #2}\\
					\raisebox{.8zh}{\scriptsize #3}
			}
		}
%
%  \yongyouwari
%  四行割りを作る．
%  \yongyouwari{第１行}{第２行}{第３行}{第４行}
%
\def\yongyouwari#1#2#3#4{\settowidth{\moziretuhaba}{{\scriptsize #1}}
		\unskip%
		\begin{minipage}{\moziretuhaba}\scriptsize
		#1
		#2\\
		#3\\
                #4
		\end{minipage}
		}
%
%  \gogyouwari
%  五行割りを作る．
%  \yongyouwari{第１行}{第２行}{第３行}{第４行}{第５行}
%
\def\gogyouwari#1#2#3#4#5{\settowidth{\moziretuhaba}{{\scriptsize #1}}
		\unskip%
		\begin{minipage}{\moziretuhaba}\scriptsize
		#1
		#2\\
		#3\\
                #4\\
		#5
		\end{minipage}
		}
\def\sougyoux#1#2{\settowidth{\moziretuhaba}{{\scriptsize #1}}
		\unskip%
		\parbox{\moziretuhaba}{\raisebox{-.6ex}{\scriptsize #1}\\
                         	        \raisebox{.6ex}{\scriptsize #2}
			}
		}
%
%  \sayuukun
%  本行の右と左に振りがなを付ける．
%  頭揃え．
%  \rubysep は効かない．行間は，下の定義の\raizebox の第1引き数を直接
%  変えることによって変更する．
%  \sayuukun{本行}{右振りがな}{左振りがな}
%
\def\sayuukun#1#2#3{\settowidth{\moziretuhaba}{#1}
		\unskip%
		\parbox{\moziretuhaba}{\raisebox{-1zw}{\tiny #2}\\
					  #1\\
                         	          \raisebox{1zw}{\tiny #3}}
		\unskip%
		}
%
%  \miseketi
%  ミセケチ．対象となる文字の左側に「゛」を付ける．
%  \miseketi{対象となる文字}
%
\def\miseketi#1{\unskip%
		\leavevmode%
		\raisebox{-.5zw}{\ ゛}
		\unskip%
		\settowidth{\moziretuhaba}{\ ゛}
		\hspace{-\moziretuhaba}
		\unskip
		#1
		\unskip%
		}
%
%  \miseketiii
%  ミセケチ2．対象となる文字の左側に「゛」を付け，右側に訂正後の文字を付す．
%  \miseketi{対象となる文字}{訂正後の文字}
%
\def\miseketiii#1#2{\settowidth{\moziretuhaba}{\tiny #2}
		\unskip%
		\raisebox{.8zw}{\tiny #2}
		\unskip%
		\hspace{-\moziretuhaba}
		\unskip%
		\raisebox{-.5zw}{\ ゛}
		\unskip%
		\settowidth{\moziretuhaba}{\ ゛}
		\hspace{-\moziretuhaba}
		\unskip%
		#1
		\unskip%
}
%
%  \zityuu
%  文字に対する注．対象となる文字の左側に「×」を付け，右側に注を付ける．
%  \zityuu{対象となる文字}{注のテキスト}
%
\def\zityuu#1#2{\settowidth{\moziretuhaba}{\tiny #2}
		\unskip%
		\raisebox{.8zw}{\tiny #2}
		\unskip%
		\hspace{-\moziretuhaba}
		\unskip%
		\raisebox{-.6zw}{\tiny\ ×}
		\unskip%
		\settowidth{\moziretuhaba}{\tiny\ ×}
		\hspace{-\moziretuhaba}
		\unskip%
		#1
		\unskip%
}
%
%  \zityuuii
%  文字に対する注．対象となる文字の左側に「×」をつけるのみ．
%  \zityuuii{対象となる文字}
%
\def\zityuuii#1{
		\unskip%
		\raisebox{-.6zw}{\tiny\ ×}
		\unskip%
		\settowidth{\moziretuhaba}{\tiny\ ×}
		\hspace{-\moziretuhaba}
		\unskip%
		#1
		\unskip%
}
\def\retenform{\kern1.1pt\raisebox{0ex}{\tiny --}\kern-4.5pt
		\raisebox{.4ex}{\tiny ／}}
%
%  \reten
%  レ点．フォントによってレ点の形が崩れる時は，上の \retenform の数値を
%　調整してください．
%
\def\reten{\unskip\raisebox{-.8zw}{\retenform}\unskip}

%\def\reten{\raisebox{-.5ex}{\tiny レ}}
%
%  \kaeriten
%  各種返り点．返り点として使用する文字を引き数とする．
%  \kaeriten{返り点として使用する文字}
%
\def\kaeriten#1{\unskip\raisebox{-.5ex}{\tiny#1}\unskip}
%
%  一点，二点，三点，上・中・下点，甲・乙・丙点．\kaeriten に文字を
%  入れたもの．引き数なし．
%
\def\ititen{\kaeriten{一}}
\def\niten{\kaeriten{二}}
\def\santen{\kaeriten{三}}
\def\zyouten{\kaeriten{上}}
\def\tyuuten{\kaeriten{中}}
\def\geten{\kaeriten{下}}
\def\kouten{\kaeriten{甲}}
\def\otuten{\kaeriten{乙}}
\def\heiten{\kaeriten{丙}}
%
%  \retenkana
%  レ点付き仮名．仮名を argument にとる．
%  \retenkana{仮名}

\def\retenkana#1{\settowidth{\moziretuhaba}{{\tiny #1}}%
		\settowidth{\moziretuhabaii}{\retenform}
		\ifdim\moziretuhaba<\moziretuhabaii 
			\moziretuhaba=\moziretuhabaii \fi
		\unskip%
		\hskip\kanjiskip
		\parbox{\moziretuhaba}{
			\raisebox{-.7ex}{\tiny #1}\\
		\raisebox{.2ex}{\retenform}
			}
		\unskip
		}
%
%  \kokana
%  返り点付き仮名．第一 argument に仮名，第ニ argument に一，二など．
%  \kokana{仮名}{返り点として使用する文字}
%
\def\kokana#1#2{\settowidth{\moziretuhaba}{{\tiny #1}}%
		\settowidth{\moziretuhabaii}{{\tiny #2}}
		\ifdim\moziretuhaba<\moziretuhabaii 
			\moziretuhaba=\moziretuhabaii \fi
		\unskip%
		\hskip\kanjiskip
		\parbox{\moziretuhaba}{\raisebox{-.7ex}{\tiny #1}\\
                         	        \raisebox{.7ex}{\tiny #2}
			}
		\unskip
		}


\def\hyousyou#1{#1\raisebox{-.5ex}{\tiny （声点・平）}}
%
%  \migikogaki
%  右小書き．
%  細字による注，本行に対し，やや右寄りに付ける．
%  \migikogaki{注とするテキスト}
%
\def\migikogaki#1{\raisebox{.5ex}{\scriptsize #1}}
%
%  \migikogakiii
%  双行の中の右小書き
%
\def\migikogakiii#1{\raisebox{.5ex}{\tiny #1}}
%
%  \odorii
%  踊り１．漢字用踊り字。
%
    \def\odorii{\leavevmode\kern.15zw\raise0.1zh\hbox{\fontsize{9pt}{12}\selectfont ゝ}%
    \kern-.38zw\raise.15zh\hbox{\fontsize{10pt}{12}\selectfont ヽ}\kern.2zw}
%
%  \odorihuku
%  複数文字の踊り字。「／＼」
%
\def\odorihuku{\rensuji{$/$}\unskip\hspace{-.25zw}\rensuji{$\backslash$}}
